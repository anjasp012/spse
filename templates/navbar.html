<!-- Navbar -->
<style>
    #navbar {
        transition: all 0.3s ease-in-out;
    }

    #navbar.fixed {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        animation: slideDown 0.3s ease-in-out;
    }

    @keyframes slideDown {
        from {
            transform: translateY(-100%);
        }
        to {
            transform: translateY(0);
        }
    }

    /* Placeholder untuk mencegah konten melompat saat navbar menjadi fixed */
    .navbar-placeholder {
        display: none;
        height: 0;
    }

    .navbar-placeholder.active {
        display: block;
    }
</style>

<div class="navbar-placeholder"></div>
<div id="navbar">
    <nav class="navbar navbar-expand-lg navbar-light">
         <div class="container">
             <a class="navbar-brand" href="/">
                 <img src="{{ url_for('static', filename='logo-BidRadarGT.png') }}" alt="logo-BidRadarGT" width="auto"
                     height="40px" style="object-fit: cover;">
             </a>
             <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                 aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                 <span class="navbar-toggler-icon"></span>
             </button>
             <div class="collapse navbar-collapse" id="navbarNav">
                 <ul class="navbar-nav ml-auto">
                     <li class="nav-item">
                         <a class="nav-link {% if active_page == 'tender' %}active{% endif %}" href="/">
                             <i class="fas fa-gavel mr-1"></i> Tender
                         </a>
                     </li>
                     <!-- <li class="nav-item">
                         <a class="nav-link {% if active_page == 'non-tender' %}active{% endif %}" href="/non-tender">
                             <i class="fas fa-handshake mr-1"></i> Non Tender
                         </a>
                     </li> -->
                     {% if session.get('user_id') %}
                     <!-- Admin menu - only visible to admin users -->
                     {% if session.get('role') == 'admin' %}
                     <li class="nav-item">
                         <a class="nav-link {% if active_page == 'admin' %}active{% endif %}" href="/admin">
                             <i class="fas fa-user-shield mr-1"></i> Admin
                         </a>
                     </li>
                     {% endif %}
                     <!-- User sudah login - tampilkan dropdown -->
                     <li class="nav-item dropdown">
                         <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                             data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                             <i class="fas fa-user mr-1"></i> {{ session.get('username', 'User') }}
                         </a>
                         <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                             <a class="dropdown-item" href="/favorites"><i class="fas fa-star mr-2"></i>Favorit Saya</a>
                             <div class="dropdown-divider"></div>
                             <a class="dropdown-item" href="/logout"><i class="fas fa-sign-out-alt mr-2"></i>Logout</a>
                         </div>
                     </li>
                     {% else %}
                     <!-- User belum login - tampilkan tombol Login & Register -->
                     <li class="nav-item">
                         <a class="nav-link" href="/login">
                             <i class="fas fa-sign-in-alt mr-1"></i> Login
                         </a>
                     </li>
                     <li class="nav-item">
                         <a class="nav-link btn btn-primary text-white ml-2" href="/register"
                             style="border-radius: 8px; padding: 0.5rem 1rem;">
                             <i class="fas fa-user-plus mr-1"></i> Register
                         </a>
                     </li>
                     {% endif %}
                 </ul>
             </div>
         </div>
     </nav>
     <div style="background: linear-gradient(135deg, #d4881c 0%, #8b1a1a 100%);">
        <div class="container text-white text-center py-1">
            Gagasan Tech. @2025 |
            <a href="mailto:hello@gagasan.info" class="text-white" style="text-decoration: none;">
                <i class="fas fa-envelope"></i> hello@gagasan.info
            </a> |
            <a href="https://wa.me/6281318622592" target="_blank" class="text-white" style="text-decoration: none;">
                <i class="fab fa-whatsapp"></i> 081318622592
            </a>
        </div>
     </div>
 </div>

<script>
    // Script untuk membuat navbar fixed saat scroll
    window.addEventListener('scroll', function() {
        const navbar = document.getElementById('navbar');
        const placeholder = document.querySelector('.navbar-placeholder');
        const scrollPosition = window.scrollY;

        // Jika scroll lebih dari 100px, tambahkan class fixed
        if (scrollPosition > 100) {
            navbar.classList.add('fixed');
            // Set placeholder height sama dengan navbar height untuk mencegah jump
            placeholder.style.height = navbar.offsetHeight + 'px';
            placeholder.classList.add('active');
        } else {
            navbar.classList.remove('fixed');
            placeholder.classList.remove('active');
        }
    });
</script>
